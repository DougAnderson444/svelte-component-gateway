{"version":3,"file":"index.svelte-a298031a.js","sources":["../../../../../src/lib/IFrame.svelte","../../../../../src/lib/srcdoc/bundled.html?raw","../../../../../src/lib/iframeSrc/constants.js","../../../../../src/lib/Gateway.svelte","../../../../runtime/app/stores.js","../../../../../src/routes/index.svelte"],"sourcesContent":["<script>\r\n\texport let iframe;\r\n\texport let srcdoc;\r\n\texport let serializedSource;\r\n</script>\r\n\r\n<div class=\"iframe-container\">\r\n\t<div class=\"header\">\r\n\t\t{#if !serializedSource}\r\n\t\t\tRendering...\r\n\t\t{/if}\r\n\t</div>\r\n\t<div class=\"iframe-inner\">\r\n\t\t<iframe title=\"Rendered REPL\" bind:this={iframe} {srcdoc} />\r\n\t</div>\r\n</div>\r\n\r\n<style>\r\n\t.header {\r\n\t\tfont-weight: 700;\r\n\t\tfont-size: 0.8rem;\r\n\t\ttext-transform: uppercase;\r\n\t\tcolor: rgba(0, 0, 0, 0.7);\r\n\t}\r\n\tiframe {\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t\tborder: 0;\r\n\t}\r\n\t.iframe-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tborder: 1px solid #a2a2a252;\r\n\t\t-webkit-border-radius: 4px;\r\n\t\t-moz-border-radius: 4px;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\t.iframe-inner {\r\n\t\tflex: 1;\r\n\t\theight: 100%;\r\n\t}\r\n</style>\r\n","export default \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n\\t<head>\\n\\t\\t<meta charset=\\\"utf-8\\\" />\\n\\t\\t<meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\" />\\n\\n\\t\\t<script defer type=\\\"module\\\">\\n\\t\\t\\tvar app=function(){\\\"use strict\\\";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return\\\"function\\\"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&\\\"object\\\"==typeof t||\\\"function\\\"==typeof t}function i(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function a(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}let d,f;function l(){if(void 0===d){d=!1;try{\\\"undefined\\\"!=typeof window&&window.parent&&window.parent.document}catch(t){d=!0}}return d}function u(t){f=t}const p=[],h=[],m=[],g=[],$=Promise.resolve();let w=!1;function b(t){m.push(t)}const y=new Set;let v=0;function _(){const t=f;do{for(;v<p.length;){const t=p[v];v++,u(t),x(t.$$)}for(u(null),p.length=0,v=0;h.length;)h.pop()();for(let t=0;t<m.length;t+=1){const e=m[t];y.has(e)||(y.add(e),e())}m.length=0}while(p.length);for(;g.length;)g.pop()();w=!1,y.clear(),u(t)}function x(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(b)}}const E=new Set;const H=\\\"undefined\\\"!=typeof window?window:\\\"undefined\\\"!=typeof globalThis?globalThis:global;function k(t,e){-1===t.$$.dirty[0]&&(p.push(t),w||(w=!0,$.then(_)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function O(s,c,a,d,l,p,h,m=[-1]){const g=f;u(s);const $=s.$$={fragment:null,ctx:null,props:p,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(g?g.$$.context:[])),callbacks:n(),dirty:m,skip_bound:!1,root:c.target||g.$$.root};h&&h($.root);let w=!1;if($.ctx=a?a(s,c.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return $.ctx&&l($.ctx[t],$.ctx[t]=o)&&(!$.skip_bound&&$.bound[t]&&$.bound[t](o),w&&k(s,t)),e})):[],$.update(),w=!0,o($.before_update),$.fragment=!!d&&d($.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);$.fragment&&$.fragment.l(t),t.forEach(i)}else $.fragment&&$.fragment.c();c.intro&&((y=s.$$.fragment)&&y.i&&(E.delete(y),y.i(v))),function(t,n,s,i){const{fragment:c,on_mount:a,on_destroy:d,after_update:f}=t.$$;c&&c.m(n,s),i||b((()=>{const n=a.map(e).filter(r);d?d.push(...n):o(n),t.$$.on_mount=[]})),f.forEach(b)}(s,c.target,c.anchor,c.customElement),_()}var y,v;u(g)}function W(t,e){document.dispatchEvent(function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent(\\\"CustomEvent\\\");return r.initCustomEvent(t,n,o,e),r}(t,Object.assign({version:\\\"3.48.0\\\"},e),{bubbles:!0}))}const j=\\\"UPDATED\\\",{window:I}=H;function S(e){let n,o,r,s;const d={c:function(){var t,o,r;n=c(\\\"div\\\"),function(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}(t=n,o=\\\"id\\\",r=\\\"app\\\"),null==r?W(\\\"SvelteDOMRemoveAttribute\\\",{node:t,attribute:o}):W(\\\"SvelteDOMSetAttribute\\\",{node:t,attribute:o,value:r}),b((()=>e[3].call(n))),function(t,e,n,o,r){t.__svelte_meta={loc:{file:e,line:n,column:o,char:r}}}(n,\\\"src\\\\\\\\lib\\\\\\\\iframeSrc\\\\\\\\InnerHandler.svelte\\\",34,0,972)},l:function(t){throw new Error(\\\"options.hydrate only works if the component was compiled with the `hydratable: true` option\\\")},m:function(t,d){!function(t,e,n){W(\\\"SvelteDOMInsert\\\",{target:t,node:e,anchor:n}),function(t,e,n){t.insertBefore(e,n||null)}(t,e,n)}(t,n,d),o=function(t,e){\\\"static\\\"===getComputedStyle(t).position&&(t.style.position=\\\"relative\\\");const n=c(\\\"iframe\\\");n.setAttribute(\\\"style\\\",\\\"display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;\\\"),n.setAttribute(\\\"aria-hidden\\\",\\\"true\\\"),n.tabIndex=-1;const o=l();let r;return o?(n.src=\\\"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\\\\/script>\\\",r=a(window,\\\"message\\\",(t=>{t.source===n.contentWindow&&e()}))):(n.src=\\\"about:blank\\\",n.onload=()=>{r=a(n.contentWindow,\\\"resize\\\",e)}),function(t,e){t.appendChild(e)}(t,n),()=>{(o||r&&n.contentWindow)&&r(),i(n)}}(n,e[3].bind(n)),r||(s=function(t,e,n,o,r,s){const i=!0===o?[\\\"capture\\\"]:o?Array.from(Object.keys(o)):[];r&&i.push(\\\"preventDefault\\\"),s&&i.push(\\\"stopPropagation\\\"),W(\\\"SvelteDOMAddEventListener\\\",{node:t,event:e,handler:n,modifiers:i});const c=a(t,e,n,o);return()=>{W(\\\"SvelteDOMRemoveEventListener\\\",{node:t,event:e,handler:n,modifiers:i}),c()}}(I,\\\"message\\\",e[2],!1,!1,!1),r=!0)},p:t,i:t,o:t,d:function(t){var e;t&&(W(\\\"SvelteDOMRemove\\\",{node:e=n}),i(e)),o(),r=!1,s()}};return W(\\\"SvelteRegisterBlock\\\",{block:d,id:S.name,type:\\\"component\\\",source:\\\"\\\",ctx:e}),d}function A(t,e,n){let{$$slots:o={},$$scope:r}=e;!function(t,e,n){for(const o of Object.keys(e))~n.indexOf(o)||console.warn(`<${t}> received an unexpected slot \\\"${o}\\\".`)}(\\\"InnerHandler\\\",o,[]);let s,{offsetWidth:i}=e,{offsetHeight:c}=e;async function a(t){const{esModule:e,props:n}=t.data,o=new Blob([e],{type:\\\"text/javascript\\\"}),r=URL.createObjectURL(o);import(r).then((function({default:t}){s&&s.$destroy(),document.getElementById(\\\"app\\\").innerHTML=\\\"\\\",s=new t({target:document.getElementById(\\\"app\\\")||document.body,props:{...n}}),window.parent.postMessage(j,window.parent)}))}const d=[\\\"offsetWidth\\\",\\\"offsetHeight\\\"];return Object.keys(e).forEach((t=>{~d.indexOf(t)||\\\"$$\\\"===t.slice(0,2)||\\\"slot\\\"===t||console.warn(`<InnerHandler> was created with unknown prop '${t}'`)})),t.$$set=t=>{\\\"offsetWidth\\\"in t&&n(0,i=t.offsetWidth),\\\"offsetHeight\\\"in t&&n(1,c=t.offsetHeight)},t.$capture_state=()=>({UPDATED:j,offsetWidth:i,offsetHeight:c,component:s,handleMessage:a}),t.$inject_state=t=>{\\\"offsetWidth\\\"in t&&n(0,i=t.offsetWidth),\\\"offsetHeight\\\"in t&&n(1,c=t.offsetHeight),\\\"component\\\"in t&&(s=t.component)},e&&\\\"$$inject\\\"in e&&t.$inject_state(e.$$inject),[i,c,a,function(){i=this.offsetWidth,c=this.offsetHeight,n(0,i),n(1,c)}]}return new class extends class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){if(!t||!t.target&&!t.$$inline)throw new Error(\\\"'target' is a required option\\\");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn(\\\"Component was already destroyed\\\")}}$capture_state(){}$inject_state(){}}{constructor(t){super(t),O(this,t,A,S,s,{offsetWidth:0,offsetHeight:1}),W(\\\"SvelteRegisterComponent\\\",{component:this,tagName:\\\"InnerHandler\\\",options:t,id:S.name});const{ctx:e}=this.$$,n=t.props||{};void 0!==e[0]||\\\"offsetWidth\\\"in n||console.warn(\\\"<InnerHandler> was created without expected prop 'offsetWidth'\\\"),void 0!==e[1]||\\\"offsetHeight\\\"in n||console.warn(\\\"<InnerHandler> was created without expected prop 'offsetHeight'\\\")}get offsetWidth(){throw new Error(\\\"<InnerHandler>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'\\\")}set offsetWidth(t){throw new Error(\\\"<InnerHandler>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'\\\")}get offsetHeight(){throw new Error(\\\"<InnerHandler>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'\\\")}set offsetHeight(t){throw new Error(\\\"<InnerHandler>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'\\\")}}({target:document.body,props:{}})}();\\n\\n\\t\\t</script>\\n\\t</head>\\n\\n\\t<body></body>\\n</html>\\n\"","export const UPDATED = 'UPDATED';\r\n","<script>\r\n\timport IFrame from './IFrame.svelte';\r\n\t// import srcdoc from './srcdoc/index.html?raw';\r\n\timport srcdoc from './srcdoc/bundled.html?raw';\r\n\timport { UPDATED } from './iframeSrc/constants.js';\r\n\r\n\texport let esModule;\r\n\texport let props;\r\n\r\n\texport let serializedSource;\r\n\r\n\tlet iframe;\r\n\r\n\t$: esModule && update({ esModule, props });\r\n\t$: iframe && iframe.addEventListener('load', handleLoad);\r\n\r\n\t// Wait for the iframe to load, then configure it\r\n\tconst handleLoad = async () => {\r\n\t\twindow.addEventListener(\r\n\t\t\t'message',\r\n\t\t\t(event) => {\r\n\t\t\t\tif (iframe && event.data == UPDATED) {\r\n\t\t\t\t\tserializedSource = new XMLSerializer().serializeToString(iframe?.contentWindow.document);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfalse\r\n\t\t);\r\n\r\n\t\tupdate({ esModule, props });\r\n\t};\r\n\r\n\tfunction update({ esModule, props }) {\r\n\t\tif (!iframe) return;\r\n\t\tiframe.contentWindow.postMessage({ esModule, props }, location.origin); // \"*\" origin wildcard\r\n\t}\r\n</script>\r\n\r\n<IFrame bind:iframe {srcdoc} {serializedSource} />\r\n","import { getContext } from 'svelte';\nimport { browser } from './env.js';\nimport '../env.js';\n\n// TODO remove this (for 1.0? after 1.0?)\nlet warned = false;\nfunction stores() {\n\tif (!warned) {\n\t\tconsole.error('stores() is deprecated; use getStores() instead');\n\t\twarned = true;\n\t}\n\treturn getStores();\n}\n\n/**\n * @type {import('$app/stores').getStores}\n */\nconst getStores = () => {\n\tconst stores = getContext('__svelte__');\n\n\treturn {\n\t\tpage: {\n\t\t\tsubscribe: stores.page.subscribe\n\t\t},\n\t\tnavigating: {\n\t\t\tsubscribe: stores.navigating.subscribe\n\t\t},\n\t\t// TODO remove this (for 1.0? after 1.0?)\n\t\t// @ts-expect-error - deprecated, not part of type definitions, but still callable\n\t\tget preloading() {\n\t\t\tconsole.error('stores.preloading is deprecated; use stores.navigating instead');\n\t\t\treturn {\n\t\t\t\tsubscribe: stores.navigating.subscribe\n\t\t\t};\n\t\t},\n\t\tsession: stores.session,\n\t\tupdated: stores.updated\n\t};\n};\n\n/** @type {typeof import('$app/stores').page} */\nconst page = {\n\t/** @param {(value: any) => void} fn */\n\tsubscribe(fn) {\n\t\tconst store = getStores().page;\n\t\treturn store.subscribe(fn);\n\t}\n};\n\n/** @type {typeof import('$app/stores').navigating} */\nconst navigating = {\n\tsubscribe(fn) {\n\t\tconst store = getStores().navigating;\n\t\treturn store.subscribe(fn);\n\t}\n};\n\n/** @param {string} verb */\nconst throw_error = (verb) => {\n\tthrow new Error(\n\t\tbrowser\n\t\t\t? `Cannot ${verb} session store before subscribing`\n\t\t\t: `Can only ${verb} session store in browser`\n\t);\n};\n\n/** @type {typeof import('$app/stores').session} */\nconst session = {\n\tsubscribe(fn) {\n\t\tconst store = getStores().session;\n\n\t\tif (browser) {\n\t\t\tsession.set = store.set;\n\t\t\tsession.update = store.update;\n\t\t}\n\n\t\treturn store.subscribe(fn);\n\t},\n\tset: () => throw_error('set'),\n\tupdate: () => throw_error('update')\n};\n\n/** @type {typeof import('$app/stores').updated} */\nconst updated = {\n\tsubscribe(fn) {\n\t\tconst store = getStores().updated;\n\n\t\tif (browser) {\n\t\t\tupdated.check = store.check;\n\t\t}\n\n\t\treturn store.subscribe(fn);\n\t},\n\tcheck: () => throw_error('check')\n};\n\nexport { getStores, navigating, page, session, stores, updated };\n","<script>\n\timport { onMount } from 'svelte';\n\timport Gateway from '@douganderson444/svelte-component-gateway';\n\timport { page } from '$app/stores';\n\n\tlet url = 'https://bafybeidchd6z3eydlkl7sloi4banjjk46aurusxj2ky2v5zj7zzzwsgwsq.ipfs.cf-ipfs.com/';\n\n\tlet component;\n\n\tlet props = { name: 'Douglas' };\n\tlet mounted;\n\tonMount(() => {\n\t\turl = $page.url.searchParams.get('url');\n\t\t// $page.url.\n\t\t// fetch the svelte component url variable and mount the Svelte app to target element\n\t\t// mount svelte iife component to dom target\n\t\t// import(`${url}`).then((module) => {\n\t\t// \tmodule.default.mount(document.getElementById('app'));\n\t\t// });\n\n\t\tmounted = true;\n\t});\n\n\t$: if (url) doFetch(url);\n\n\tlet fetched;\n\n\tasync function doFetch(url) {\n\t\ttry {\n\t\t\tfetched = await fetch(url);\n\t\t\tconst text = await fetched.text();\n\t\t\tcomponent = text;\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t}\n\n\t// .then((response) => response.text())\n\t// .then((text) => {\n\t// \tcomponent = text;\n\t// });}\n</script>\n\n<main class=\"m-4\">\n\t<h1 class=\"text-3xl font-bold py-2\">Svelte Component Gateway</h1>\n\t<p class=\"my-2\">\n\t\tLoading from // make form input with url default\n\t\t<input type=\"text\" name=\"url\" bind:value={url} size=\"90\" class=\"border p-2\" />\n\t\t<a href={url} target=\"_blank\" class=\"underline text-blue-400\">{url}</a>\n\t</p>\n\n\tProps: {JSON.stringify(props)}\n\n\t{#if component}\n\t\t<Gateway esModule={component} {props} />\n\t{/if}\n\t<!-- {component} -->\n</main>\n"],"names":["create_if_block"],"mappings":"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"}