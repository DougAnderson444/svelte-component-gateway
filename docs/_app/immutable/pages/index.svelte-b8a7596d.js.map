{"version":3,"file":"index.svelte-b8a7596d.js","sources":["../../../../../../src/lib/IFrame.svelte","../../../../../../src/lib/srcdoc/bundled.html?raw","../../../../../../src/lib/iframeSrc/constants.js","../../../../../../src/lib/Gateway.svelte","../../../../../../src/lib/FetchComponent.svelte","../../../../../runtime/app/stores.js","../../../../../../node_modules/@douganderson444/pointer-tracker/dist/PointerTracker.mjs","../../../../../../node_modules/@douganderson444/svelte-panhandle/src/lib/PanHandle.svelte","../../../../../../node_modules/@douganderson444/svelte-resizable/package/Resizer.svelte","../../../../../../src/routes/index.svelte"],"sourcesContent":["<script>\r\n\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/sandbox\r\n\texport let iframe = null;\r\n\texport let srcdoc;\r\n\texport let rendered;\r\n\r\n\tlet offsetWidth;\r\n\tlet sendWidth;\r\n\r\n\t// synchronize the width of the parent container and the iframe child\r\n\t$: iframe && iframe.addEventListener('load', handleLoad);\r\n\tlet channel;\r\n\t// Wait for the iframe to load, then configure \"width sender\"\r\n\tasync function handleLoad() {\r\n\t\tif (!iframe || !offsetWidth) throw new Error('Missing offsetWidth');\r\n\r\n\t\tchannel = new MessageChannel();\r\n\r\n\t\tchannel.port1.onmessage = (e) => {\r\n\t\t\t// console.log('WIDTH MESSAGE', { e: e.data });\r\n\t\t\t// e.data; // do something with the reply?\r\n\t\t};\r\n\t\tsendWidth = () => {\r\n\t\t\tiframe.contentWindow.postMessage(\r\n\t\t\t\t{ offsetWidth }, // push the details to loadEsModuleComponent({ esModule, props }) in the iframe\r\n\t\t\t\t'*', // there's only 1 contentWindow on the iframe so it' safe to use '*' as origin\r\n\t\t\t\t[channel.port2]\r\n\t\t\t); // enables the iframe to send messages containing prop updates back to the parent\r\n\t\t};\r\n\t}\r\n\r\n\t$: if (offsetWidth && sendWidth) sendWidth();\r\n\r\n\t$: if (iframe && channel) {\r\n\t\t/**\r\n\t\t * Normally you wouldn't set both allow-scripts and allow-same-origin\r\n\t\t * Because the iframe can remove sandbox attribute and reload the iframe\r\n\t\t * However with svelte we can detect reload of iframe here, and add it back always\r\n\t\t * So this risk is mitigated\r\n\t\t */\r\n\t\t// check if iframe element has a sandbox attribute on it\r\n\t\tif (\r\n\t\t\t!iframe.getAttribute('sandbox') ||\r\n\t\t\t(iframe.getAttribute('sandbox') && iframe.sandbox != 'allow-scripts allow-same-origin')\r\n\t\t) {\r\n\t\t\t// if sandbox was removed, reload this iframe\r\n\t\t\tiframe.contentWindow.location.reload();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<div class=\"iframe-container\">\r\n\t<div class=\"header\">\r\n\t\t{#if !rendered}\r\n\t\t\tRendering...\r\n\t\t{/if}\r\n\t</div>\r\n\t<div class=\"iframe-inner\">\r\n\t\t<iframe\r\n\t\t\tsandbox=\"allow-scripts allow-same-origin\"\r\n\t\t\tallow=\"camera *;microphone *\"\r\n\t\t\ttitle=\"Rendered Component\"\r\n\t\t\tbind:this={iframe}\r\n\t\t\t{srcdoc}\r\n\t\t\tbind:offsetWidth\r\n\t\t\tallowfullscreen\r\n\t\t/>\r\n\t</div>\r\n</div>\r\n\r\n<style>\r\n\t.iframe-container {\r\n\t\tdisplay: flex;\r\n\t\tflex: 1;\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t\t-webkit-border-radius: 4px;\r\n\t\t-moz-border-radius: 4px;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.header {\r\n\t\tfont-weight: 700;\r\n\t\tfont-size: 0.8rem;\r\n\t\ttext-transform: uppercase;\r\n\t\tcolor: rgba(0, 0, 0, 0.7);\r\n\t}\r\n\tiframe {\r\n\t\tdisplay: flex;\r\n\t\tflex: 1;\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t\tborder: 0;\r\n\t}\r\n\r\n\t.iframe-inner {\r\n\t\tdisplay: flex;\r\n\t\tflex: 1;\r\n\t\theight: 100%;\r\n\t}\r\n</style>\r\n","export default \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n\\t<head>\\n\\t\\t<meta charset=\\\"utf-8\\\" />\\n\\t\\t<meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\" />\\n\\t\\t<style>\\n\\t\\t\\t* {\\n\\t\\t\\t\\tmargin: 0;\\n\\t\\t\\t\\tpadding: 0;\\n\\t\\t\\t\\t/*  include padding and the border */\\n\\t\\t\\t\\tbox-sizing: border-box;\\n\\t\\t\\t\\t/* more padding on the inside of your box, but you don't want the box to resize */\\n\\t\\t\\t\\t/* box-sizing: content-box; */\\n\\t\\t\\t}\\n\\n\\t\\t\\tbody {\\n\\t\\t\\t\\tmargin: 0;\\n\\t\\t\\t\\tposition: relative;\\n\\t\\t\\t}\\n\\t\\t</style>\\n\\t\\t<script defer type=\\\"module\\\">\\n\\t\\t\\tvar app=function(){\\\"use strict\\\";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return\\\"function\\\"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&\\\"object\\\"==typeof t||\\\"function\\\"==typeof t}function c(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function l(){return a(\\\"\\\")}class d{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){var o;this.e||(this.is_svg?this.e=(o=e.nodeName,document.createElementNS(\\\"http://www.w3.org/2000/svg\\\",o)):this.e=u(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)c(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(i)}}let f;function p(t){f=t}function h(){if(!f)throw new Error(\\\"Function called outside component initialization\\\");return f}function $(){const t=h();return(e,n,{cancelable:o=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=function(t,e,{bubbles:n=!1,cancelable:o=!1}){const s=document.createEvent(\\\"CustomEvent\\\");return s.initCustomEvent(t,n,o,e),s}(e,n,{cancelable:o});return s.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}const m=[],g=[],b=[],y=[],v=Promise.resolve();let _=!1;function w(t){b.push(t)}const x=new Set;let E=0;function k(){const t=f;do{for(;E<m.length;){const t=m[E];E++,p(t),M(t.$$)}for(p(null),m.length=0,E=0;g.length;)g.pop()();for(let t=0;t<b.length;t+=1){const e=b[t];x.has(e)||(x.add(e),e())}b.length=0}while(m.length);for(;y.length;)y.pop()();_=!1,x.clear(),p(t)}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(w)}}const L=new Set;let j;function N(t,e){t&&t.i&&(L.delete(t),t.i(e))}function O(t,e,n,o){if(t&&t.o){if(L.has(t))return;L.add(t),j.c.push((()=>{L.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function R(t,n,r,c){const{fragment:i,on_mount:u,on_destroy:a,after_update:l}=t.$$;i&&i.m(n,r),c||w((()=>{const n=u.map(e).filter(s);a?a.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(w)}function T(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(t,e){-1===t.$$.dirty[0]&&(m.push(t),_||(_=!0,v.then(k)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(e,s,r,c,u,a,l,d=[-1]){const h=f;p(e);const $=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(h?h.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:s.target||h.$$.root};l&&l($.root);let m=!1;if($.ctx=r?r(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return $.ctx&&u($.ctx[t],$.ctx[t]=s)&&(!$.skip_bound&&$.bound[t]&&$.bound[t](s),m&&P(e,t)),n})):[],$.update(),m=!0,o($.before_update),$.fragment=!!c&&c($.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);$.fragment&&$.fragment.l(t),t.forEach(i)}else $.fragment&&$.fragment.c();s.intro&&N(e.$$.fragment),R(e,s.target,s.anchor,s.customElement),k()}p(h)}class S{$destroy(){T(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function C(e){let n,o,s,r;return{c(){n=new d(!1),o=l(),s=a(\\\" \\\"),r=u(\\\"div\\\"),n.a=o},m(t,i){n.m(e[0],document.head),function(t,e){t.appendChild(e)}(document.head,o),c(t,s,i),c(t,r,i),e[6](r)},p(t,[e]){1&e&&n.p(t[0])},i:t,o:t,d(t){i(o),t&&n.d(),t&&i(s),t&&i(r),e[6](null)}}}function H(t,e,n){let{esModule:o}=e,{props:s}=e,{css:r}=e;const c=$();let i,u,a,l;function d(t){i&&t&&i.$set({...t})}var f;return f=()=>{n(5,l=!0)},h().$$.on_mount.push(f),function(t){h().$$.on_destroy.push(t)}((()=>{i&&i.$destroy(),u&&URL.revokeObjectURL(u)})),t.$$set=t=>{\\\"esModule\\\"in t&&n(2,o=t.esModule),\\\"props\\\"in t&&n(3,s=t.props),\\\"css\\\"in t&&n(0,r=t.css)},t.$$.update=()=>{36&t.$$.dirty&&l&&o&&async function(){n(0,r=r?`<style>${r}</style>`:\\\"\\\"),i&&(i.$destroy(),URL.revokeObjectURL(u));const t=new Blob([o],{type:\\\"text/javascript\\\"});u=URL.createObjectURL(t);const e=(await import(u)).default;if(!e||!a)return;n(1,a.innerHTML=\\\"\\\",a),n(4,i=new e({target:a,props:{}}));const l=i.$$.props;let f={};Object.keys(l).map((t=>{f[t]=i[t]}));let p=Object.assign(f,s);c(\\\"change\\\",p),i.$on(\\\"change\\\",(t=>{c(\\\"change\\\",t.detail)})),d(p)}(),24&t.$$.dirty&&i&&s&&d()},[r,a,o,s,i,l,function(t){g[t?\\\"unshift\\\":\\\"push\\\"]((()=>{a=t,n(1,a)}))}]}class q extends S{constructor(t){super(),U(this,t,H,C,r,{esModule:2,props:3,css:0})}}function A(t){let e,n;return e=new q({props:{esModule:t[0],props:t[1]}}),e.$on(\\\"change\\\",t[3]),{c(){var t;(t=e.$$.fragment)&&t.c()},m(t,o){R(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.esModule=t[0]),2&n&&(o.props=t[1]),e.$set(o)},i(t){n||(N(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function B(t){let e,n,s,r,u=t[0]&&A(t);return{c(){u&&u.c(),e=l()},m(o,i){var a,l,d,f;u&&u.m(o,i),c(o,e,i),n=!0,s||(a=window,l=\\\"message\\\",d=t[2],a.addEventListener(l,d,f),r=()=>a.removeEventListener(l,d,f),s=!0)},p(t,[n]){t[0]?u?(u.p(t,n),1&n&&N(u,1)):(u=A(t),u.c(),N(u,1),u.m(e.parentNode,e)):u&&(j={r:0,c:[],p:j},O(u,1,1,(()=>{u=null})),j.r||o(j.c),j=j.p)},i(t){n||(N(u),n=!0)},o(t){O(u),n=!1},d(t){u&&u.d(t),t&&i(e),s=!1,r()}}}function X(t,e,n){let o,s,r;return[o,s,async function(t){t?.data&&(t?.data.hasOwnProperty(\\\"load\\\")&&(n(0,({esModule:o,props:s}=t.data.load),o,n(1,s)),r=e=>{t.ports[0].postMessage(e)}),t?.data.hasOwnProperty(\\\"setProps\\\")&&n(1,s=t.data.setProps))},function(t){r&&t.detail&&r(t.detail)}]}globalThis.fetch=()=>(console.log(\\\"Nulled out fetch\\\"),{json:()=>({result:\\\"no fetch, sorry\\\"})}),globalThis.XMLHttpRequest=class{constructor(){console.log(\\\"Nulled out XHR too\\\")}open=()=>null;send=()=>null},globalThis.WebSocket=null,globalThis.EventSource=null;return new class extends S{constructor(t){super(),U(this,t,X,B,r,{})}}({target:document.body,props:{}})}();\\n\\n\\t\\t</script>\\n\\t</head>\\n\\n\\t<body></body>\\n</html>\\n\"","export const CHANGE = 'change';\r\n","<script>\r\n\timport IFrame from './IFrame.svelte';\r\n\timport srcdoc from './srcdoc/bundled.html?raw';\r\n\timport { CHANGE } from './iframeSrc/constants.js';\r\n\timport { createEventDispatcher } from 'svelte';\r\n\r\n\texport let esModule; // TODO: Handle error if not found\r\n\texport let css = null;\r\n\texport let props; // the consumer of this <Gateway bind:props /> component should bind the props to get updates\r\n\texport let rendered = false;\r\n\r\n\t// refresh/reload when esModule changes\r\n\t$: if (esModule && iframe) handleLoad();\r\n\r\n\tlet iframe;\r\n\tlet setProps;\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\t// this fires when props change; emits an event to update any listeners consuming this compiled component\r\n\t// $: if (props) dispatch(CHANGE, props);\r\n\r\n\t$: iframe && iframe.addEventListener('load', handleLoad);\r\n\r\n\t// Wait for the iframe to load, then configure it\r\n\tasync function handleLoad() {\r\n\t\tif (!esModule || !iframe) throw new Error('Missing esModule');\r\n\r\n\t\tconst channel = new MessageChannel();\r\n\r\n\t\tchannel.port1.onmessage = (e) => {\r\n\t\t\t// props = { ...props, ...e.data }; // update props on any reply from child\r\n\t\t\trendered = true;\r\n\t\t\tdispatch(CHANGE, { ...props, ...e.data }); // this fires when props change; emits an event to update any listeners consuming this compiled component\r\n\r\n\t\t\tsetProps = (props) => {\r\n\t\t\t\tiframe.contentWindow.postMessage(\r\n\t\t\t\t\t{ setProps: props }, // push the details to the iframe\r\n\t\t\t\t\t'*' // there's only 1 contentWindow on the iframe so it' safe to use '*' as origin\r\n\t\t\t\t);\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tiframe.contentWindow.postMessage(\r\n\t\t\t{ load: { esModule, props, css } }, // push the details to loadEsModuleComponent({ esModule, props }) in the iframe\r\n\t\t\t'*', // there's only 1 contentWindow on the iframe so it' safe to use '*' as origin\r\n\t\t\t[channel.port2]\r\n\t\t); // enables the iframe to send messages containing prop updates back to the parent\r\n\t}\r\n\r\n\t// update props as they change\r\n\t$: if (props && setProps) setProps(props);\r\n</script>\r\n\r\n<IFrame bind:iframe {srcdoc} {rendered} />\r\n","<script>\r\n\timport { onMount } from 'svelte';\r\n\t// import { page } from '$app/stores';\r\n\r\n\texport let url;\r\n\tlet component;\r\n\r\n\tlet mounted = false;\r\n\r\n\tonMount(() => {\r\n\t\tmounted = true;\r\n\t\turl = location.url.searchParams.get('url') || url;\r\n\t\twindow.cachedURL = url;\r\n\t\tdoFetch(url);\r\n\t});\r\n\r\n\t$: if (mounted && url && window.cachedURL != url) doFetch(url);\r\n\r\n\tlet fetched;\r\n\r\n\tasync function doFetch(url) {\r\n\t\tif (!url) return;\r\n\t\ttry {\r\n\t\t\twindow.cachedURL = url; // reset cache, avoiding duplicate downloads\r\n\t\t\tfetched = await fetch(url);\r\n\t\t\tif (!fetched.ok) throw new Error(fetched.statusText);\r\n\t\t\tconsole.log('fetching', url, { fetched });\r\n\t\t\tconst text = await fetched.text();\r\n\t\t\tconsole.log('fetched:', { text });\r\n\r\n\t\t\tcomponent = text;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<!-- <p class=\"my-2\">\r\n\tLoading from<br />\r\n\t<input type=\"text\" name=\"url\" bind:value={url} size=\"90\" class=\"border p-2\" />\r\n\t<a href={url} target=\"_blank\" class=\"underline text-blue-400\">{url}</a>\r\n</p> -->\r\n\r\n<slot {component} />\r\n\r\n<svelte:head>\r\n\t<script src=\"https://cdn.tailwindcss.com\"></script>\r\n\t<link href=\"https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css\" rel=\"stylesheet\" />\r\n</svelte:head>\r\n","import { getContext } from 'svelte';\nimport { browser } from './env.js';\nimport '../env.js';\n\n// TODO remove this (for 1.0? after 1.0?)\nlet warned = false;\nfunction stores() {\n\tif (!warned) {\n\t\tconsole.error('stores() is deprecated; use getStores() instead');\n\t\twarned = true;\n\t}\n\treturn getStores();\n}\n\n/**\n * @type {import('$app/stores').getStores}\n */\nconst getStores = () => {\n\tconst stores = getContext('__svelte__');\n\n\treturn {\n\t\tpage: {\n\t\t\tsubscribe: stores.page.subscribe\n\t\t},\n\t\tnavigating: {\n\t\t\tsubscribe: stores.navigating.subscribe\n\t\t},\n\t\t// TODO remove this (for 1.0? after 1.0?)\n\t\t// @ts-expect-error - deprecated, not part of type definitions, but still callable\n\t\tget preloading() {\n\t\t\tconsole.error('stores.preloading is deprecated; use stores.navigating instead');\n\t\t\treturn {\n\t\t\t\tsubscribe: stores.navigating.subscribe\n\t\t\t};\n\t\t},\n\t\tsession: stores.session,\n\t\tupdated: stores.updated\n\t};\n};\n\n/** @type {typeof import('$app/stores').page} */\nconst page = {\n\t/** @param {(value: any) => void} fn */\n\tsubscribe(fn) {\n\t\tconst store = getStores().page;\n\t\treturn store.subscribe(fn);\n\t}\n};\n\n/** @type {typeof import('$app/stores').navigating} */\nconst navigating = {\n\tsubscribe(fn) {\n\t\tconst store = getStores().navigating;\n\t\treturn store.subscribe(fn);\n\t}\n};\n\n/** @param {string} verb */\nconst throw_error = (verb) => {\n\tthrow new Error(\n\t\tbrowser\n\t\t\t? `Cannot ${verb} session store before subscribing`\n\t\t\t: `Can only ${verb} session store in browser`\n\t);\n};\n\n/** @type {typeof import('$app/stores').session} */\nconst session = {\n\tsubscribe(fn) {\n\t\tconst store = getStores().session;\n\n\t\tif (browser) {\n\t\t\tsession.set = store.set;\n\t\t\tsession.update = store.update;\n\t\t}\n\n\t\treturn store.subscribe(fn);\n\t},\n\tset: () => throw_error('set'),\n\tupdate: () => throw_error('update')\n};\n\n/** @type {typeof import('$app/stores').updated} */\nconst updated = {\n\tsubscribe(fn) {\n\t\tconst store = getStores().updated;\n\n\t\tif (browser) {\n\t\t\tupdated.check = store.check;\n\t\t}\n\n\t\treturn store.subscribe(fn);\n\t},\n\tcheck: () => throw_error('check')\n};\n\nexport { getStores, navigating, page, session, stores, updated };\n","class Pointer {\r\n    constructor(nativePointer) {\r\n        /** Unique ID for this pointer */\r\n        this.id = -1;\r\n        this.nativePointer = nativePointer;\r\n        this.pageX = nativePointer.pageX;\r\n        this.pageY = nativePointer.pageY;\r\n        this.clientX = nativePointer.clientX;\r\n        this.clientY = nativePointer.clientY;\r\n        if (self.Touch && nativePointer instanceof Touch) {\r\n            this.id = nativePointer.identifier;\r\n        }\r\n        else if (isPointerEvent(nativePointer)) {\r\n            // is PointerEvent\r\n            this.id = nativePointer.pointerId;\r\n        }\r\n    }\r\n    /**\r\n     * Returns an expanded set of Pointers for high-resolution inputs.\r\n     */\r\n    getCoalesced() {\r\n        if ('getCoalescedEvents' in this.nativePointer) {\r\n            const events = this.nativePointer\r\n                .getCoalescedEvents()\r\n                .map((p) => new Pointer(p));\r\n            // Firefox sometimes returns an empty list here. I'm not sure it's doing the right thing.\r\n            // https://github.com/w3c/pointerevents/issues/409\r\n            if (events.length > 0)\r\n                return events;\r\n            // Otherwise, Firefox falls through…\r\n        }\r\n        return [this];\r\n    }\r\n}\r\nconst isPointerEvent = (event) => 'pointerId' in event;\r\nconst isTouchEvent = (event) => 'changedTouches' in event;\r\nconst noop = () => { };\r\n/**\r\n * Track pointers across a particular element\r\n */\r\nclass PointerTracker {\r\n    /**\r\n     * Track pointers across a particular element\r\n     *\r\n     * @param element Element to monitor.\r\n     * @param options\r\n     */\r\n    constructor(_element, { start = () => true, move = noop, end = noop, rawUpdates = false, avoidPointerEvents = false, eventListenerOptions = { capture: false, passive: false, once: false }, } = {}) {\r\n        this._element = _element;\r\n        /**\r\n         * State of the tracked pointers when they were pressed/touched.\r\n         */\r\n        this.startPointers = [];\r\n        /**\r\n         * Latest state of the tracked pointers. Contains the same number of pointers, and in the same\r\n         * order as this.startPointers.\r\n         */\r\n        this.currentPointers = [];\r\n        /**\r\n         * Firefox has a bug where touch-based pointer events have a `buttons` of 0, when this shouldn't\r\n         * happen. https://bugzilla.mozilla.org/show_bug.cgi?id=1729440\r\n         *\r\n         * Usually we treat `buttons === 0` as no-longer-pressed. This set allows us to exclude these\r\n         * buggy Firefox events.\r\n         */\r\n        this._excludeFromButtonsCheck = new Set();\r\n        /**\r\n         * Listener for mouse/pointer starts.\r\n         *\r\n         * @param event This will only be a MouseEvent if the browser doesn't support pointer events.\r\n         */\r\n        this._pointerStart = (event) => {\r\n            if (isPointerEvent(event) && event.buttons === 0) {\r\n                // This is the buggy Firefox case. See _excludeFromButtonsCheck.\r\n                this._excludeFromButtonsCheck.add(event.pointerId);\r\n            }\r\n            else if (!(event.buttons & 1 /* LeftMouseOrTouchOrPenDown */)) {\r\n                return;\r\n            }\r\n            const pointer = new Pointer(event);\r\n            // If we're already tracking this pointer, ignore this event.\r\n            // This happens with mouse events when multiple buttons are pressed.\r\n            if (this.currentPointers.some((p) => p.id === pointer.id))\r\n                return;\r\n            if (!this._triggerPointerStart(pointer, event))\r\n                return;\r\n            // Add listeners for additional events.\r\n            // The listeners may already exist, but no harm in adding them again.\r\n            if (isPointerEvent(event)) {\r\n                const capturingElement = event.target && 'setPointerCapture' in event.target\r\n                    ? event.target\r\n                    : this._element;\r\n                capturingElement.setPointerCapture(event.pointerId);\r\n                this._element.addEventListener(this._rawUpdates ? 'pointerrawupdate' : 'pointermove', this._move, this._eventListenerOptions);\r\n                this._element.addEventListener('pointerup', this._pointerEnd, this._eventListenerOptions);\r\n                this._element.addEventListener('pointercancel', this._pointerEnd, this._eventListenerOptions);\r\n            }\r\n            else {\r\n                // MouseEvent\r\n                window.addEventListener('mousemove', this._move);\r\n                window.addEventListener('mouseup', this._pointerEnd);\r\n            }\r\n        };\r\n        /**\r\n         * Listener for touchstart.\r\n         * Only used if the browser doesn't support pointer events.\r\n         */\r\n        this._touchStart = (event) => {\r\n            for (const touch of Array.from(event.changedTouches)) {\r\n                this._triggerPointerStart(new Pointer(touch), event);\r\n            }\r\n        };\r\n        /**\r\n         * Listener for pointer/mouse/touch move events.\r\n         */\r\n        this._move = (event) => {\r\n            if (!isTouchEvent(event) &&\r\n                (!isPointerEvent(event) ||\r\n                    !this._excludeFromButtonsCheck.has(event.pointerId)) &&\r\n                event.buttons === 0 /* None */) {\r\n                // This happens in a number of buggy cases where the browser failed to deliver a pointerup\r\n                // or pointercancel. If we see the pointer moving without any buttons down, synthesize an end.\r\n                // https://github.com/w3c/pointerevents/issues/407\r\n                // https://github.com/w3c/pointerevents/issues/408\r\n                this._pointerEnd(event);\r\n                return;\r\n            }\r\n            const previousPointers = this.currentPointers.slice();\r\n            const changedPointers = isTouchEvent(event)\r\n                ? Array.from(event.changedTouches).map((t) => new Pointer(t))\r\n                : [new Pointer(event)];\r\n            const trackedChangedPointers = [];\r\n            for (const pointer of changedPointers) {\r\n                const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n                if (index === -1)\r\n                    continue; // Not a pointer we're tracking\r\n                trackedChangedPointers.push(pointer);\r\n                this.currentPointers[index] = pointer;\r\n            }\r\n            if (trackedChangedPointers.length === 0)\r\n                return;\r\n            this._moveCallback(previousPointers, trackedChangedPointers, event);\r\n        };\r\n        /**\r\n         * Call the end callback for this pointer.\r\n         *\r\n         * @param pointer Pointer\r\n         * @param event Related event\r\n         */\r\n        this._triggerPointerEnd = (pointer, event) => {\r\n            // Main button still down?\r\n            // With mouse events, you get a mouseup per mouse button, so the left button might still be down.\r\n            if (!isTouchEvent(event) &&\r\n                event.buttons & 1 /* LeftMouseOrTouchOrPenDown */) {\r\n                return false;\r\n            }\r\n            const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n            // Not a pointer we're interested in?\r\n            if (index === -1)\r\n                return false;\r\n            this.currentPointers.splice(index, 1);\r\n            this.startPointers.splice(index, 1);\r\n            this._excludeFromButtonsCheck.delete(pointer.id);\r\n            // The event.type might be a 'move' event due to workarounds for weird mouse behaviour.\r\n            // See _move for details.\r\n            const cancelled = !(event.type === 'mouseup' ||\r\n                event.type === 'touchend' ||\r\n                event.type === 'pointerup');\r\n            this._endCallback(pointer, event, cancelled);\r\n            return true;\r\n        };\r\n        /**\r\n         * Listener for mouse/pointer ends.\r\n         *\r\n         * @param event This will only be a MouseEvent if the browser doesn't support pointer events.\r\n         */\r\n        this._pointerEnd = (event) => {\r\n            if (!this._triggerPointerEnd(new Pointer(event), event))\r\n                return;\r\n            if (isPointerEvent(event)) {\r\n                if (this.currentPointers.length)\r\n                    return;\r\n                this._element.removeEventListener(this._rawUpdates ? 'pointerrawupdate' : 'pointermove', this._move);\r\n                this._element.removeEventListener('pointerup', this._pointerEnd);\r\n                this._element.removeEventListener('pointercancel', this._pointerEnd);\r\n            }\r\n            else {\r\n                // MouseEvent\r\n                window.removeEventListener('mousemove', this._move);\r\n                window.removeEventListener('mouseup', this._pointerEnd);\r\n            }\r\n        };\r\n        /**\r\n         * Listener for touchend.\r\n         * Only used if the browser doesn't support pointer events.\r\n         */\r\n        this._touchEnd = (event) => {\r\n            for (const touch of Array.from(event.changedTouches)) {\r\n                this._triggerPointerEnd(new Pointer(touch), event);\r\n            }\r\n        };\r\n        this._startCallback = start;\r\n        this._moveCallback = move;\r\n        this._endCallback = end;\r\n        this._rawUpdates = rawUpdates && 'onpointerrawupdate' in window;\r\n        this._eventListenerOptions = eventListenerOptions;\r\n        // Add listeners\r\n        if (self.PointerEvent && !avoidPointerEvents) {\r\n            this._element.addEventListener('pointerdown', this._pointerStart, this._eventListenerOptions);\r\n        }\r\n        else {\r\n            this._element.addEventListener('mousedown', this._pointerStart, this._eventListenerOptions);\r\n            this._element.addEventListener('touchstart', this._touchStart, this._eventListenerOptions);\r\n            this._element.addEventListener('touchmove', this._move, this._eventListenerOptions);\r\n            this._element.addEventListener('touchend', this._touchEnd, this._eventListenerOptions);\r\n            this._element.addEventListener('touchcancel', this._touchEnd, this._eventListenerOptions);\r\n        }\r\n    }\r\n    /**\r\n     * Remove all listeners.\r\n     */\r\n    stop() {\r\n        this._element.removeEventListener('pointerdown', this._pointerStart);\r\n        this._element.removeEventListener('mousedown', this._pointerStart);\r\n        this._element.removeEventListener('touchstart', this._touchStart);\r\n        this._element.removeEventListener('touchmove', this._move);\r\n        this._element.removeEventListener('touchend', this._touchEnd);\r\n        this._element.removeEventListener('touchcancel', this._touchEnd);\r\n        this._element.removeEventListener(this._rawUpdates ? 'pointerrawupdate' : 'pointermove', this._move);\r\n        this._element.removeEventListener('pointerup', this._pointerEnd);\r\n        this._element.removeEventListener('pointercancel', this._pointerEnd);\r\n        window.removeEventListener('mousemove', this._move);\r\n        window.removeEventListener('mouseup', this._pointerEnd);\r\n    }\r\n    /**\r\n     * Call the start callback for this pointer, and track it if the user wants.\r\n     *\r\n     * @param pointer Pointer\r\n     * @param event Related event\r\n     * @returns Whether the pointer is being tracked.\r\n     */\r\n    _triggerPointerStart(pointer, event) {\r\n        if (!this._startCallback(pointer, event))\r\n            return false;\r\n        this.currentPointers.push(pointer);\r\n        this.startPointers.push(pointer);\r\n        return true;\r\n    }\r\n}\n\nexport { PointerTracker as default };\n","<script>\n\timport PointerTracker from '@douganderson444/pointer-tracker';\n\n\tlet pointerTracker;\n\n\tlet left;\n\tlet top;\n\n\tfunction panHandle(node) {\n\t\tpointerTracker = new PointerTracker(node, {\n\t\t\teventListenerOptions: { capture: true }, // catch the event before it goes to child in the DOM tree\n\t\t\tavoidPointerEvents: true, // pointers dont seem to work\n\t\t\tstart: (pointer, event) => {\n\t\t\t\tif (pointerTracker.currentPointers.length === 1) return false; // track only 1 pointer at a time\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tleft = (left || getComputedStyle(node.parentNode)['left'].replace('px', '') || 0) * 1;\n\t\t\t\ttop = (top || getComputedStyle(node.parentNode)['top'].replace('px', '') || 0) * 1;\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tmove: (previousPointers, changedPointers, event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation(); // continue exclusive rights over the pointer from DOM tree\n\t\t\t\tlet dx = pointerTracker.currentPointers[0].pageX - previousPointers[0].pageX;\n\t\t\t\tlet dy = pointerTracker.currentPointers[0].pageY - previousPointers[0].pageY;\n\n\t\t\t\tleft = left + dx;\n\t\t\t\ttop = top + dy;\n\n\t\t\t\tnode.parentNode.style.left = left + 'px';\n\t\t\t\tnode.parentNode.style.top = top + 'px';\n\t\t\t},\n\t\t\tend: (pointer, event, cancelled) => {\n\t\t\t\t// nothing to do here\n\t\t\t\tconsole.log('Drag ended');\n\t\t\t}\n\t\t});\n\t}\n</script>\n\n<div class=\"dragger\" use:panHandle>\n\t<svg\n\t\twidth=\"20\"\n\t\theight=\"20\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\taria-hidden=\"true\"\n\t\tclass=\"svg-inline--fa fa-arrows-alt fa-w-16\"\n\t\tdata-icon=\"arrows-alt\"\n\t\tdata-prefix=\"fas\"\n\t\tviewBox=\"0 0 512 512\"\n\t\t><defs /><path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M352 426l-79 79c-9 9-25 9-34 0l-79-79c-15-15-5-41 17-41h51V284H127v51c0 22-26 32-41 17L7 273c-9-9-9-25 0-34l79-79c15-15 41-5 41 17v51h101V127h-51c-22 0-32-26-17-41l79-79c9-9 25-9 34 0l79 79c15 15 5 41-17 41h-51v101h101v-51c0-22 26-32 41-17l79 79c9 9 9 25 0 34l-79 79c-15 15-41 5-41-17v-51H284v101h51c22 0 32 26 17 41z\"\n\t\t/></svg\n\t>\n</div>\n\n<style>\n\t.dragger {\n\t\tcursor: grab;\n\t\tuser-select: none;\n\t\tcolor: rgba(255, 255, 255, 0.69);\n\t\ttext-align: center;\n\t\tbackground: rgba(0, 0, 0, 0.103);\n\t\tmargin: 10px;\n\t\tmargin: 10px;\n\t\tpadding: 7px;\n\t\tborder-radius: 3px;\n\t\tborder: 0px solid #aaa;\n\t\tposition: absolute;\n\t\ttop: 1px;\n\t\tright: 1px;\n\t\tz-index: 10;\n\t}\n</style>\n","<script>\n\timport PointerTracker from '@douganderson444/pointer-tracker';\n\n\tlet pointerTracker;\n\tlet shiftX;\n\tlet shiftY;\n\n\tlet width;\n\tlet height;\n\tlet dx, dy;\n\n\tfunction resizable(node) {\n\t\tpointerTracker = new PointerTracker(node, {\n\t\t\teventListenerOptions: { capture: true }, // catch the event before it goes to child in the DOM tree\n\t\t\tavoidPointerEvents: true, // pointers dont seem to work\n\t\t\tstart: (pointer, event) => {\n\t\t\t\tif (pointerTracker.currentPointers.length === 1) return false; // track only 1 pointer at a time\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\twidth = (width || getComputedStyle(node.parentNode)['width'].replace('px', '') || 0) * 1;\n\t\t\t\theight = (height || getComputedStyle(node.parentNode)['height'].replace('px', '') || 0) * 1;\n\n\t\t\t\tshiftX = 0; // pointer.clientX - node.getBoundingClientRect().left;\n\t\t\t\tshiftY = 0; // pointer.clientY - node.getBoundingClientRect().top;\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tmove: (previousPointers, changedPointers, event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation(); // continue exclusive rights over the pointer from DOM tree\n\n\t\t\t\tdx = pointerTracker.currentPointers[0].pageX - previousPointers[0].pageX;\n\t\t\t\tdy = pointerTracker.currentPointers[0].pageY - previousPointers[0].pageY;\n\n\t\t\t\t// const currentRect = node.parentNode.getBoundingClientRect();\n\t\t\t\t// pointerTracker.currentPointers[0].pageX - shiftX - currentRect.left + 'px';\n\t\t\t\t// pointerTracker.currentPointers[0].pageY - shiftY - currentRect.top + 'px';\n\n\t\t\t\twidth = width + dx;\n\t\t\t\theight = height + dy;\n\n\t\t\t\tnode.parentNode.style.width = width + 'px';\n\t\t\t\tnode.parentNode.style.height = height + 1 + 'px';\n\t\t\t},\n\t\t\tend: (pointer, event, cancelled) => {\n\t\t\t\t// nothing to do here\n\t\t\t\tconsole.log('Drag ended');\n\t\t\t}\n\t\t});\n\t}\n</script>\n\n<div class=\"svlt-resizer\" use:resizable />\n\n<style>\n\t:root {\n\t\t--width: 2.5em;\n\t\t--line-width: 0.4em;\n\t}\n\t.svlt-resizer {\n\t\tuser-select: none;\n\t\tpadding: 0.5em;\n\n\t\twidth: calc(var(--width) * 2.25);\n\t\theight: calc(var(--width) * 2.25);\n\t\tposition: absolute;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tcursor: se-resize;\n\t\ttransform: translate(calc(var(--width) / 1), calc(var(--width) / 1));\n\t\ttransform-origin: 0 0;\n\t}\n\t.svlt-resizer::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tright: calc(-1 * var(--line-width) / 2);\n\t\tbottom: calc(-1 * var(--line-width) / 2);\n\t\twidth: calc(var(--width) / 2);\n\t\theight: calc(var(--width) / 2);\n\t\tborder-right: var(--line-width) solid rgba(107, 107, 107, 0.5);\n\t\tborder-bottom: var(--line-width) solid rgba(133, 133, 133, 0.5);\n\t\ttransform: translate(calc(-1 * var(--width) / 1.1), calc(-1 * var(--width) / 1.1));\n\t\ttransform-origin: 0 0;\n\t}\n</style>\n","<script>\n\timport { onMount } from 'svelte';\n\timport { Gateway, FetchComponent } from '@douganderson444/svelte-component-gateway';\n\timport { page } from '$app/stores';\n\timport { PanHandle } from '@douganderson444/svelte-panhandle';\n\timport { Resizer } from '@douganderson444/svelte-resizable';\n\n\t// import component from '../../../awesome-peerpiper-components/compiled/@peerpiper/ContactCard.svelte.js?raw';\n\n\tlet url =\n\t\t'https://raw.githubusercontent.com/PeerPiper/awesome-peerpiper-components/master/compiled/%40peerpiper/ContactCard.svelte.js';\n\n\tlet props = {\n\t\tprofile: {\n\t\t\tfirstName: 'Doug',\n\t\t\tlastName: 'Anders'\n\t\t}\n\t};\n\n\tlet width;\n\tlet height;\n\tlet vh;\n\n\tonMount(() => {\n\t\turl = $page.url.searchParams.get('url') || url;\n\t\twindow.cachedURL = url;\n\t\thandleViewportSize();\n\t});\n\n\tfunction handleViewportSize(_) {\n\t\tvh = window.innerHeight * 0.01;\n\t\theight = window.innerHeight;\n\t\twidth = document?.body.clientWidth; // excludes scrollbar\n\t}\n\n\tfunction handleChange(e) {\n\t\tprops = Object.assign({}, props, e.detail);\n\t}\n</script>\n\n<svelte:window on:resize={handleViewportSize} />\n\n<div class=\"app\" style=\"--vh: {vh}px; height: calc(var(--vh, 1vh) * 100);\">\n\t<h1 class=\"text-3xl font-bold py-2\">Svelte Component Gateway</h1>\n\n\t<!-- Fetch gets the component from the interwebs and passes it back up here through let:component  -->\n\t<FetchComponent {url} let:component>\n\t\tProps: {JSON.stringify(props)}\n\n\t\t<div\n\t\t\tclass=\"border flex-auto absolute bg-orange-50/50 h-96 w-full\"\n\t\t\tstyle=\"top: 105px; left:10px; min-width: 100px; min-height: 100px;\"\n\t\t>\n\t\t\t{#if component}\n\t\t\t\t<!-- on:change bubbles the emited 'change' event to the parent component, if bind:props isn't avail -->\n\t\t\t\t<Gateway esModule={component} {props} {width} {height} on:change={handleChange} />\n\t\t\t\t<PanHandle />\n\t\t\t\t<Resizer />\n\t\t\t{/if}\n\t\t</div>\n\t</FetchComponent>\n</div>\n\n<style>\n\t.app {\n\t\theight: 100vh; /* Fallback for browsers that do not support Custom Properties */\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n</style>\n"],"names":["create_if_block"],"mappings":"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"}